---
tags:
  - TODO
aliases:
  - sistema di transizione
date: 2024-10-30
---

- ## Linguaggio:
	- definito tramite sintassi astratta(semplice ma [[Ambiguità||ambigua]]) 
	- una stringa viene sempre associata ad un [[Alberi di derivazione#^c6e9bf||albero sintattico]] (non ambigua)
- ## Insiemi di base:
	- booleani: $\{tt,ff\}$ _metavariabili_ $t,t_{1},t'\in \pi$ 
	- numeri naturali: $\{1,2,...\}\in \mathbb{N}$ 
	- variabili: $\{a,b,c,...,z\}\in \mathbf{Var}$ 
- ## Insiemi derivati:
	- ![[Pasted image 20241001110818.png]]
	- sintassi non ambigua molto complicata ma non serve nel dare la [[Semantica e sintassi#^78ca9a||semantica]]
	- Infatti il [[Analisi sintattica||Parser]] dalla [[Sintassi concreta e astratta||sintassi concreta]] tira fuori l'albero sintattico di sintassi astratta 
	- Quindi per dare semantica si può partire da quegli alberi.
- ## Sistema di transizione:
	- una tripla $<\Gamma, T, \to >$
		- $\Gamma$ l'insieme di stati 
		- $T\subseteq \Gamma$ insieme degli stati terminali.
		- $\to \subseteq \Gamma \times \Gamma$ è la relazione di transizione.
	- una computazione che parte da uno stato $\gamma_0$ è una sequenza $\gamma_{0} \to \gamma_{1}\to ...$ che può essere finita o non
	- con $\to^*$ indico la chiusura riflessiva:
		- ![[Pasted image 20241001111738.png]]
	- ### ES:
		- ![[Pasted image 20241001111806.png]]
		- i nodi sono gli stati e le frecce le transizioni.
	- ### Problemi:
		- 1) necessitiamo di trovare una rappresentazione finita di $\Gamma$ attraverso [[Grammatiche]] 
			- #### Es:
				- $\Gamma_{e}=\{<e,\sigma>|e\in Exp, \sigma\in \mathbf{Store}\}$
				- $Exp$ è definito in [[Grammatiche#^0c16bf||BNF]] 
		- 2) $\to \subseteq \Gamma \times \Gamma$ è costituita di solito da infinite coppie $\gamma\to \gamma'$ quindi necessitiamo di trovare una rappresentazione finita come minima relazione che soddisfa un certo insieme _finito di assiomi e regole di inferenza_
		- 3) Per dare un significato alle variabili (che possono assumere solo valore su $\mathbb{N}$) si introduce uno $\mathbf{Store}\ \sigma: Var \to \mathbb{N}$ come una funzione che associa ad ogni variabile un valore $$\sigma=\left\{ \frac{x_{1}}{n_{1}}, \frac{x_{2}}{n_{2}},...,\frac {x_{k}}{n_{k}} \right\}$$  
- ## Semantica delle espressioni aritmetiche: ^b41a95
	- $$<\Gamma_{e},T_{e},\to_{e}>$$
		- $\Gamma_{e}=\{<e,\sigma>|e\in Exp, \ \sigma\in \mathbf{Store}\}$
		- $T_{e}=\{<n,\sigma>|n\in \mathbb{N}, \ \sigma\in \mathbf{Store}\}$
		- $\to_{e}$ è la minima relazione che soddisfa gli assiomi e regole di inferenza seguenti:
			- ![[Pasted image 20241001112854.png]]
			- ### Osservazioni: ^38f86f
				- 1) se nella premessa lo store $\sigma$ non viene modificato allora neanche nella conclusione verrà modificato. Questo è il caso di _Var, sum3, sub3_ in caso contrario verrà modificato.
				- 2) in _sub3_ se la condizione $m\ge m'$ non viene rispettata lo stato $<m-m', \sigma>$ viene bloccato ma non sarà uno stato terminale.
				- 3) in _sum1, sum2_ riflettono una regola detta Interna sinistra(_IS_)
					- prima verificano l'argomento più a sx, ovvero $e_{0}$ 
					- dopo aver valutato $e_{0}$ procede a valutare $e_{1}$
					- dopo aver terminato la valutazione di $e_{1}$ si esegue la somma.
					- _Caso interno destro (ID)_
						- ![[Pasted image 20241002194607.png]]
- ## Dim: ^48bf4e
	- voglio dimostrare che $\to_e$ è deterministica ovvero che:$$(\gamma\to_{e} \gamma') \wedge (\gamma\to_{e} \gamma'')\implies \gamma'=\gamma''  \ \ \ \ \forall \gamma,\gamma',\gamma''$$
	- $P(e)=\forall \sigma,\gamma',\gamma''$ e dimostro che $P(e)$ è vera $\forall e \in Exp$ 
	- uso l'induzione strutturale:
	- 1) $e=m\in \mathbb{N}$ 
		- so che $<m, \sigma>\not \to e$ quindi $P(m)$ è vera siccome la premessa è falsa dell'implicazione è falsa.
	- 2) $e=v \in \mathbf{Var}$
		-  per la regola Var $<v, \sigma>\to <\sigma(v), \sigma>$ siccome la  $\sigma(v)$ è univoco e c'è solo una regola (Var) la tesi segue:$$<v,\sigma>\to_{e} \gamma'  \wedge <v,\sigma>\to_{e} \gamma'' \implies \gamma'=\gamma''$$
	- 3) $e=e_{0}+e_{1}$ 
		- suppongo che $<e_{0}+e_{1},\sigma>$ derivi in $\gamma', \gamma''$ e devo dimostrare siano uguali. Ci sono 3 sotto-casi:
			- a) $<e_{0}, \sigma>\to <e_{0}', \sigma'>$ e  $\gamma'=<e_{0}'+e_{1}, \sigma'>$
				- $e_{0}\notin \mathbb{N}$ e si applica solo (_sum1_)  e allora per far si che $<e_{0}+e_{1},\sigma>\to \gamma''$ è necessario che:
					- $<e_{0}, \sigma>\to <e_{0}'', \sigma''>$ e  $\gamma''=<e_{0}''+e_{1}, \sigma'''>$
				- ma per l'ipotesi induttiva $P(e_{0})$ vale per cui deve essere $e_{0}'=e_{0}''$ e $\sigma'=\sigma''$ da cui consegue $\gamma'=\gamma''$
			- b)
				-  $e_{0}=m \in \mathbb{N}$ e $<e_{0}, \sigma>\to <e_{0}', \sigma'>$ in questo caso $e_{1}\notin \mathbb{N}$ e applico (_sum2_) quindi per far si che 
					- $<e_{0}+e_{1},\sigma>\to \gamma''$ necessito che $<e_{1}, \sigma>\to <e_{1}'', \sigma''>$ e $\gamma''=<e_{0}+e_{1}'', \sigma'''>$ 
				- ma per l'ipotesi induttiva $P(e_{1})$ vale per cui deve essere $e_{1}'=e_{1}''$ e $\sigma'=\sigma''$ da cui consegue $\gamma'=\gamma''$
			- c) $e_{0}, e_{1}\in \mathbb{N}$ 
				- si applica solo (_sum3_) ottenendo _una sola transizione_ :
					- $<e_{0}+e_{1}, \sigma> \to <p, \sigma>: p=e_{0}+e_{1}$ 
				- segue che $$<e_{0}+e_{1}, \sigma>\to \gamma' \wedge <e_{0}+e_{1}, \sigma>\to \gamma'' \implies \gamma'=\gamma''$$ 
	- Visto che $\to _e$ è deterministica significa che partendo da $<e,\sigma>$ si arriva ad una sola configurazione terminale $<n, \sigma>$ con $n$ che è il valore di  $e$ in $\sigma$ 
	- è possibile definire una funzione: 
		- $\mathbf{eval}: Expr \times Store$ deriva parzialmente in $\mathbb{N}$ 
		- $eval(e, \sigma)=\begin{cases}m & <e,\sigma\>\to^{*}<m,\sigma>\\ indefinta & altrimenti\end{cases}$
			- perché non sempre raggiunge uno stato terminale.
			- ![[Pasted image 20241002203435.png]]
			- Configurazione bloccata ma non terminale.
- ## Equivalenze tra espressioni:
	- $e \equiv e' \iff \forall \sigma \in Store, \ \ eval(e, \sigma)=eval(e', \sigma)$  
	- ES: $x+(y+z)\equiv (x+y)+z$ 
- ## Semantica delle Expr booleane:
	- $$b::= t\ |\ e=e\ |\ b \vee b\ |\ \neg b$$
	- $<\Gamma_{b}, T_{b}, \to_{b}>$ dove $\Gamma_{b}=\{<b, \sigma>\ |\ b\in Bexp,\ \sigma \in Store\}$ 
	  $T_{b}=\{<tt, \sigma>, <ff, \sigma>\ |\ \sigma \in Store\}$
	  $\to_{b}$ è la minima relazione generata dai seguenti assiomi:
		- ![[Pasted image 20241002204311.png]]
		  ![[Pasted image 20241002204331.png]]
	- ### Osservazioni:
		- 1) lo store non viene mai modificato durante la valutazione di una $Bexp$ (_Eq3, Or2, Or3, Neg2_) per lo stesso motivo di [[Semantica operazionale strutturata#^38f86f||Osservazioni sulla semantica dell'aritmetica]] 
		- 2) $\to_{b}$ è deterministica come fatto [[Semantica operazionale strutturata#^48bf4e||qui]], per cui si può definire:$$eval_{b}(b,\sigma)=\begin{cases}t & <b,\sigma>\to^{*} <t, \sigma>\\ indefinito & altrimenti\end{cases}$$
			- $b\equiv b'\iff \forall \sigma\in Store,\ \ \ eval_{b}(b,\sigma)=eval_{b}(b',\sigma)$ 
			- ES: $\neg((3=v)\vee (3=4))\equiv \neg(v=3)$
	- si potrebbero definire regole di valutazione diverse per l'_or_ da _ES_ come _ED_ o _IS_, ma non sono tutte equivalenti:
		-  ![[Pasted image 20241002205419.png]]
		- #### ES:
			- $\gamma=<(3-5)=6 \vee tt, \sigma>$
			- $\gamma\not\to_{ES}$ perché $3-5$ è bloccato ovvero _sub3_ non è applicabile
			- $\gamma\to_{ED} <>tt,\sigma$